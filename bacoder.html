<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextQR - Professional Barcode Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="bwip-js-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .feature-icon {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        .testimonial-card {
            background: white;
            border-radius: 16px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        }
        .mobile-menu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .mobile-menu.open {
            max-height: 500px;
        }
        .file-input-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px dashed #cbd5e1;
            border-radius: 0.5rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .file-input-label:hover {
            border-color: #4f46e5;
            background-color: #f8fafc;
        }
        .file-input-label.dragging {
            border-color: #4f46e5;
            background-color: #eef2ff;
        }
        .feature-card {
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="text-gray-800">
    <!-- Navbar/Header -->
    <header class="gradient-bg text-white sticky top-0 z-50 shadow-md">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <i class="fas fa-qrcode text-3xl mr-2"></i>
                    <h1 class="text-2xl font-bold">NextQR</h1>
                </div>
                <nav class="hidden md:block">
                    <ul class="flex space-x-8 items-center">
                        <li><a href="#" class="hover:text-gray-200 transition font-medium">Home</a></li>
                        <li><a href="#features" class="hover:text-gray-200 transition font-medium">Features</a></li>
                        <li><a href="#how-it-works" class="hover:text-gray-200 transition font-medium">How It Works</a></li>
                        <li><a href="#testimonials" class="hover:text-gray-200 transition font-medium">Testimonials</a></li>
                        <li class="relative group">
                            <a href="#" class="hover:text-gray-200 transition font-medium flex items-center">
                                QR Types <i class="fas fa-chevron-down ml-1 text-sm"></i>
                            </a>
                            <div class="absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-2 z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
                                <a href="logoqr.html" class="block px-4 py-2 text-gray-800 hover:bg-indigo-50">Logo QR</a>
                                <a href="colorqr.html" class="block px-4 py-2 text-gray-800 hover:bg-indigo-50">Color QR</a>
                                <a href="dotshapeqr.html" class="block px-4 py-2 text-gray-800 hover:bg-indigo-50">Shape QR</a>
                                <a href="dotqroverimage.html" class="block px-4 py-2 text-gray-800 hover:bg-indigo-50">Image QR</a>
                                <a href="microqr.html" class="block px-4 py-2 text-gray-800 hover:bg-indigo-50">Micro QR</a>
                                <a href="rmqr.html" class="block px-4 py-2 text-gray-800 hover:bg-indigo-50">rMQR</a>
                                <a href="barcodegen.html" class="block px-4 py-2 text-gray-800 hover:bg-indigo-50">Barcodes</a>
                            </div>
                        </li>
                    </ul>
                </nav>
                <button id="mobile-menu-button" class="md:hidden text-xl focus:outline-none">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <!-- Mobile menu -->
            <div id="mobile-menu" class="mobile-menu md:hidden">
                <ul class="py-4 space-y-3">
                    <li><a href="#" class="block hover:text-gray-200 transition">Home</a></li>
                    <li><a href="#features" class="block hover:text-gray-200 transition">Features</a></li>
                    <li><a href="#how-it-works" class="block hover:text-gray-200 transition">How It Works</a></li>
                    <li><a href="#testimonials" class="block hover:text-gray-200 transition">Testimonials</a></li>
                    <li class="pt-2">
                        <span class="text-gray-300 block mb-2">QR Types:</span>
                        <div class="grid grid-cols-2 gap-2 pl-4">
                            <a href="logoqr.html" class="block hover:text-gray-200 transition text-sm">Logo QR</a>
                            <a href="colorqr.html" class="block hover:text-gray-200 transition text-sm">Color QR</a>
                            <a href="dotshapeqr.html" class="block hover:text-gray-200 transition text-sm">Shape QR</a>
                            <a href="dotqroverimage.html" class="block hover:text-gray-200 transition text-sm">Image QR</a>
                            <a href="microqr.html" class="block hover:text-gray-200 transition text-sm">Micro QR</a>
                            <a href="rmqr.html" class="block hover:text-gray-200 transition text-sm">rMQR</a>
                            <a href="barcodegen.html" class="block hover:text-gray-200 transition text-sm">Barcodes</a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </header>

    <div class="text-center mb-12 pt-16">
        <h2 class="text-4xl font-bold mb-4 bg-gradient-to-r from-indigo-400 to-purple-600 bg-clip-text text-transparent">
            Professional Barcode Generator
        </h2>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
            Create high-quality barcodes for retail, inventory, shipping and more. Supports all major barcode formats.
        </p>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-md overflow-hidden p-6">
            <div class="md:flex">
                <!-- Input Section -->
                <div class="md:w-1/2 p-4">
                    <div class="mb-6">
                        <label for="barcodeType" class="block text-sm font-medium text-gray-700 mb-1">Barcode Type</label>
                        <select id="barcodeType" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="code128">Code 128</option>
                            <option value="code39">Code 39</option>
                            <option value="qrcode">QR Code</option>
                            <option value="datamatrix">Data Matrix</option>
                            <option value="codabar">Codabar</option>
                            <option value="ean13">EAN-13</option>
                            <option value="ean8">EAN-8</option>
                            <option value="pdf417">PDF417</option>
                            <option value="upca">UPC-A</option>
                            <option value="upce">UPC-E</option>
                            <option value="azteccode">Aztec</option>
                            <option value="code93">Code 93</option>
                            <option value="interleaved2of5">Interleaved 2 of 5</option>
                            <option value="code11">Code 11</option>
                            <option value="gs1-128">GS1-128</option>
                            <option value="databaromni">GS1 DataBar Omni</option>
                            <option value="databarexpanded">GS1 DataBar Expanded</option>
                            <option value="itf14">ITF-14</option>
                            <option value="maxicode">MaxiCode</option>
                            <option value="msi">MSI Plessey</option>
                            <option value="matrix2of5">Matrix 2 of 5</option>
                            <option value="postnet">PostNet</option>
                            <option value="industrial2of5">Industrial 2 of 5</option>
                            <option value="onecode">USPS Intelligent Mail</option>
                        </select>
                    </div>

                    <div class="mb-6">
                        <label for="barcodeInput" class="block text-sm font-medium text-gray-700 mb-1">Barcode Data</label>
                        <input type="text" id="barcodeInput" placeholder="Enter data for barcode" 
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    </div>

                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Customization</label>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="barcodeColor" class="block text-xs font-medium text-gray-600 mb-1">Barcode Color</label>
                                <input type="color" id="barcodeColor" value="#000000" class="w-10 h-10 border border-gray-300 rounded cursor-pointer">
                            </div>
                            <div>
                                <label for="barcodeBgColor" class="block text-xs font-medium text-gray-600 mb-1">Background</label>
                                <input type="color" id="barcodeBgColor" value="#ffffff" class="w-10 h-10 border border-gray-300 rounded cursor-pointer">
                            </div>
                        </div>
                    </div>

                    <button id="generateBarcode" class="w-full px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium">
                        <i class="fas fa-barcode mr-2"></i> Generate Barcode
                    </button>
                </div>

                <!-- Preview Section -->
                <div class="md:w-1/2 p-4 flex flex-col items-center justify-center">
                    <div class="w-full max-w-md mx-auto bg-gradient-to-br from-indigo-50 to-purple-100 rounded-xl shadow p-6 mb-6 flex flex-col items-center">
                        <h3 class="font-medium text-gray-700 mb-4 text-center">Barcode Preview</h3>
                        <div id="barcodeContainer" class="bg-white p-4 rounded-lg shadow-inner flex items-center justify-center min-h-[250px] w-full">
                            <p id="barcodePlaceholder" class="text-gray-400 text-center">Your barcode will appear here</p>
                            <canvas id="barcodeCanvas" class="hidden"></canvas>
                        </div>
                        <div id="barcodeError" class="text-red-500 text-sm hidden my-2 text-center"></div>
                        <div class="flex space-x-3 mt-4">
                            <button id="downloadBarcode" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition font-medium flex items-center">
                                <i class="fas fa-download mr-2"></i> Download
                            </button>
                            <button id="shareBarcode" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition font-medium flex items-center">
                                <i class="fas fa-share-alt mr-2"></i> Share
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <div id="features" class="py-12">
            <h2 class="text-3xl font-bold text-center mb-12">Barcode Generator Features</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="feature-card bg-white p-6 rounded-xl shadow-md">
                    <div class="feature-icon gradient-bg text-white">
                        <i class="fas fa-barcode text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">30+ Barcode Types</h3>
                    <p class="text-gray-600">Generate all standard barcode formats including Code 128, EAN-13, UPC, QR Code, Data Matrix and more.</p>
                </div>
                <div class="feature-card bg-white p-6 rounded-xl shadow-md">
                    <div class="feature-icon gradient-bg text-white">
                        <i class="fas fa-palette text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Customizable Design</h3>
                    <p class="text-gray-600">Adjust colors, sizes and formatting to match your brand identity and application requirements.</p>
                </div>
                <div class="feature-card bg-white p-6 rounded-xl shadow-md">
                    <div class="feature-icon gradient-bg text-white">
                        <i class="fas fa-file-export text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Multiple Export Options</h3>
                    <p class="text-gray-600">Download as high-resolution PNG, vector SVG, or copy to clipboard for immediate use.</p>
                </div>
            </div>
        </div>

        <!-- How It Works -->
        <div id="how-it-works" class="py-12 bg-white rounded-xl shadow-lg p-8 mb-12">
            <h2 class="text-3xl font-bold text-center mb-8">How To Generate Barcodes</h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div class="text-center">
                    <div class="w-16 h-16 gradient-bg text-white rounded-full flex items-center justify-center mx-auto mb-4 text-2xl font-bold">1</div>
                    <h3 class="font-bold mb-2">Select Type</h3>
                    <p class="text-gray-600">Choose from 30+ barcode formats based on your needs</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 gradient-bg text-white rounded-full flex items-center justify-center mx-auto mb-4 text-2xl font-bold">2</div>
                    <h3 class="font-bold mb-2">Enter Data</h3>
                    <p class="text-gray-600">Input the numeric or alphanumeric data to encode</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 gradient-bg text-white rounded-full flex items-center justify-center mx-auto mb-4 text-2xl font-bold">3</div>
                    <h3 class="font-bold mb-2">Customize</h3>
                    <p class="text-gray-600">Adjust colors and appearance to match your design</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 gradient-bg text-white rounded-full flex items-center justify-center mx-auto mb-4 text-2xl font-bold">4</div>
                    <h3 class="font-bold mb-2">Download</h3>
                    <p class="text-gray-600">Export as PNG, SVG or copy to clipboard instantly</p>
                </div>
            </div>
        </div>

        <!-- Barcode Types Table -->
        <div class="py-12">
            <h2 class="text-3xl font-bold text-center mb-8">Supported Barcode Formats</h2>
            <div class="overflow-x-auto bg-white rounded-xl shadow-lg">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Format</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Common Uses</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Code 128</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Alphanumeric</td>
                            <td class="px-6 py-4 text-sm text-gray-500">High-density linear barcode</td>
                            <td class="px-6 py-4 text-sm text-gray-500">Shipping, logistics, inventory</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">EAN-13</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Numeric</td>
                            <td class="px-6 py-4 text-sm text-gray-500">13-digit product barcode</td>
                            <td class="px-6 py-4 text-sm text-gray-500">Retail products worldwide</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">UPC-A</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Numeric</td>
                            <td class="px-6 py-4 text-sm text-gray-500">12-digit product barcode</td>
                            <td class="px-6 py-4 text-sm text-gray-500">Retail products in North America</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">QR Code</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2D</td>
                            <td class="px-6 py-4 text-sm text-gray-500">Matrix barcode with high capacity</td>
                            <td class="px-6 py-4 text-sm text-gray-500">Marketing, URLs, contact info</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Data Matrix</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2D</td>
                            <td class="px-6 py-4 text-sm text-gray-500">Compact matrix barcode</td>
                            <td class="px-6 py-4 text-sm text-gray-500">Small items, electronics, healthcare</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Testimonials -->
        <div id="testimonials" class="py-12">
            <h2 class="text-3xl font-bold text-center mb-12">Trusted By Businesses Worldwide</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="testimonial-card p-8">
                    <div class="flex items-center mb-4">
                        <img src="https://randomuser.me/api/portraits/women/43.jpg" alt="User" class="w-12 h-12 rounded-full mr-4">
                        <div>
                            <h4 class="font-bold">Sarah Johnson</h4>
                            <p class="text-gray-500 text-sm">Retail Manager</p>
                        </div>
                    </div>
                    <p class="text-gray-700">"We use this barcode generator daily for our product labels. The quality is excellent and it saves us hundreds in specialized software."</p>
                </div>
                <div class="testimonial-card p-8">
                    <div class="flex items-center mb-4">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User" class="w-12 h-12 rounded-full mr-4">
                        <div>
                            <h4 class="font-bold">Michael Chen</h4>
                            <p class="text-gray-500 text-sm">Warehouse Supervisor</p>
                        </div>
                    </div>
                    <p class="text-gray-700">"Generating Code 128 barcodes for our inventory system has never been easier. The SVG export works perfectly with our label printers."</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div>
                    <div class="flex items-center mb-4">
                        <i class="fas fa-qrcode text-2xl mr-2 text-indigo-400"></i>
                        <h2 class="text-xl font-bold">NextQR</h2>
                    </div>
                    <p class="text-gray-400">The most advanced QR and barcode generator on the web. Free forever.</p>
                </div>
                <div>
                    <h3 class="text-lg font-bold mb-4">Features</h3>
                    <ul class="space-y-2">
                        <li><a href="logoqr.html" class="text-gray-400 hover:text-white transition">Logo QR</a></li>
                        <li><a href="colorqr.html" class="text-gray-400 hover:text-white transition">Color QR</a></li>
                        <li><a href="dotshapeqr.html" class="text-gray-400 hover:text-white transition">Shape QR</a></li>
                        <li><a href="barcodegen.html" class="text-gray-400 hover:text-white transition">Barcodes</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold mb-4">Resources</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Blog</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Tutorials</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">API</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Help Center</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold mb-4">Company</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">About Us</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Contact</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Privacy Policy</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="pt-8 border-t border-gray-800 flex flex-col md:flex-row justify-between items-center">
                <div class="text-gray-400 text-sm mb-4 md:mb-0">
                    <p>&copy; 2025 NextQR. All rights reserved.</p>
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-twitter text-xl"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-facebook text-xl"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-instagram text-xl"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-github text-xl"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            
            mobileMenuButton.addEventListener('click', function() {
                mobileMenu.classList.toggle('open');
            });

            // Barcode generation
            const barcodeTypeMap = {
                'code128': 'code128',
                'code39': 'code39',
                'qrcode': 'qrcode',
                'datamatrix': 'datamatrix',
                'codabar': 'codabar',
                'ean13': 'ean13',
                'ean8': 'ean8',
                'pdf417': 'pdf417',
                'upca': 'upca',
                'upce': 'upce',
                'azteccode': 'azteccode',
                'code93': 'code93',
                'interleaved2of5': 'interleaved2of5',
                'code11': 'code11',
                'gs1-128': 'gs1-128',
                'databaromni': 'databaromni',
                'databarexpanded': 'databarexpanded',
                'itf14': 'itf14',
                'maxicode': 'maxicode',
                'msi': 'msi',
                'matrix2of5': 'matrix2of5',
                'postnet': 'postnet',
                'industrial2of5': 'industrial2of5',
                'onecode': 'onecode',
            };

            const generateBtn = document.getElementById('generateBarcode');
            const barcodeInput = document.getElementById('barcodeInput');
            const barcodeType = document.getElementById('barcodeType');
            const barcodeColor = document.getElementById('barcodeColor');
            const barcodeBgColor = document.getElementById('barcodeBgColor');
            const barcodeCanvas = document.getElementById('barcodeCanvas');
            const barcodeContainer = document.getElementById('barcodeContainer');
            const barcodePlaceholder = document.getElementById('barcodePlaceholder');
            const barcodeError = document.getElementById('barcodeError');
            const downloadBarcode = document.getElementById('downloadBarcode');
            const shareBarcode = document.getElementById('shareBarcode');

            // Generate barcode

            // Download barcode as PNG
            downloadBarcode.addEventListener('click', function() {
                if (barcodeCanvas.classList.contains('hidden')) {
                    alert('Please generate a barcode first.');
                    return;
                }
                const link = document.createElement('a');
                link.href = barcodeCanvas.toDataURL('image/png');
                link.download = 'barcode.png';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            });

            // Share barcode using Web Share API (if available)
            shareBarcode.addEventListener('click', async function() {
                if (barcodeCanvas.classList.contains('hidden')) {
                    alert('Please generate a barcode first.');
                    return;
                }
                try {
                    // Convert canvas to blob
                    barcodeCanvas.toBlob(async function(blob) {
                        if (!blob) {
                            alert('Failed to prepare barcode for sharing.');
                            return;
                        }
                        const file = new File([blob], 'barcode.png', { type: 'image/png' });
                        if (navigator.canShare && navigator.canShare({ files: [file] })) {
                            await navigator.share({
                                files: [file],
                                title: 'Barcode',
                                text: 'Here is your generated barcode.'
                            });
                        } else {
                            // Fallback: download
                            const link = document.createElement('a');
                            link.href = URL.createObjectURL(blob);
                            link.download = 'barcode.png';
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);
                        }
                    }, 'image/png');
                } catch (e) {
                    alert('Sharing failed: ' + e);
                }
            });
            // Use the simple barcode generator from barcodegen.html
            function generateBarcodeSimple() {
                var value = barcodeInput.value.trim();
                var type = barcodeType.value;
                var canvas = barcodeCanvas;
                if (!value) {
                    alert('Please enter a value to generate barcode.');
                    return;
                }
                // Clear previous barcode
                var ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                // Set default size
                canvas.width = 400;
                canvas.height = 120;
                // 2D barcodes: adjust size
                if (["qrcode", "datamatrix", "pdf417", "azteccode", "maxicode"].includes(type)) {
                    canvas.width = 400;
                    canvas.height = 220;
                }
                try {
                    let opts = { bcid: barcodeTypeMap[type], text: value, scale: 3, height: 10, includetext: true, textxalign: 'center' };
                    if (["qrcode", "datamatrix", "pdf417", "azteccode", "maxicode"].includes(type)) {
                        opts.scale = 5;
                        opts.height = undefined;
                    }
                    if (type === 'gs1-128') {
                        opts.eci = true;
                        opts.parsefnc = true;
                    }
                    if (!window.bwipjs || !bwipjs.toCanvas) {
                        alert('Barcode library (bwip-js) is not loaded.');
                        return;
                    }
                    bwipjs.toCanvas(canvas, opts);
                    canvas.classList.remove('hidden');
                    barcodePlaceholder.classList.add('hidden');
                    barcodeError.classList.add('hidden');
                } catch (e) {
                    alert('Error generating barcode: ' + e);
                    console.error('Barcode generation error:', e);
                }
            }

            // Use the new function for the button
            generateBtn.removeEventListener('click', generateBarcode);
            generateBtn.addEventListener('click', generateBarcodeSimple);
            
            // Also generate when pressing Enter in input field
            barcodeInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    generateBarcode();
                }
            });

            function generateBarcode() {
                const value = barcodeInput.value.trim();
                const type = barcodeType.value;
                
                if (!value) {
                    showError('Please enter data to generate barcode');
                    return;
                }
                
                // Validate specific barcode types
                if (type === 'ean13' && !/^\d{12,13}$/.test(value)) {
                    showError('EAN-13 requires 12 or 13 digits');
                    return;
                }
                
                if (type === 'upca' && !/^\d{12}$/.test(value)) {
                    showError('UPC-A requires exactly 12 digits');
                    return;
                }
                
                if (type === 'ean8' && !/^\d{7,8}$/.test(value)) {
                    showError('EAN-8 requires 7 or 8 digits');
                    return;
                }
                
                // Clear previous barcode and errors
                barcodeCanvas.classList.add('hidden');
                barcodePlaceholder.classList.remove('hidden');
                barcodeError.classList.add('hidden');
                
                // Set canvas size based on barcode type
                const is2D = ["qrcode", "datamatrix", "pdf417", "azteccode", "maxicode"].includes(type);
                barcodeCanvas.width = is2D ? 300 : 400;
                barcodeCanvas.height = is2D ? 300 : 120;
                
                try {
                    const options = {
                        bcid: barcodeTypeMap[type],
                        text: value,
                        scale: is2D ? 8 : 3,
                        height: is2D ? undefined : 15,
                        includetext: true,
                        textxalign: 'center',
                        backgroundcolor: hexToRgb(barcodeBgColor.value),
                        barcolor: hexToRgb(barcodeColor.value)
                    };
                    
                    // Special options for certain barcode types
                    if (type === 'gs1-128') {
                        options.eci = true;
                        options.parsefnc = true;
                    }
                    
                    if (type === 'qrcode') {
                        options.eclevel = 'H'; // High error correction
                    }
                    
                    // Generate the barcode
                    bwipjs.toCanvas(barcodeCanvas, options, function(err) {
                        if (err) {
                            showError('Error generating barcode: ' + err.message);
                            console.error(err);
                        } else {
                            // Success - show the barcode
                            barcodeCanvas.classList.remove('hidden');
                            barcodePlaceholder.classList.add('hidden');
                        }
                    });
                } catch (e) {
                    showError('Error generating barcode: ' + e.message);
                    console.error(e);
                }
            }
            
            function showError(message) {
                barcodeError.textContent = message;
                barcodeError.classList.remove('hidden');
            }
            
            function hexToRgb(hex) {
                // Convert hex color to RGB format that bwip-js expects
                const r = parseInt(hex.substring(1, 3), 16);
                const g = parseInt(hex.substring(3, 5), 16);
                const b = parseInt(hex.substring(5, 7), 16);
                return [r, g, b];
            }
            
            // Download as PNG
            downloadPNG.addEventListener('click', function() {
                if (barcodeCanvas.classList.contains('hidden')) {
                    showError('No barcode generated yet');
                    return;
                }
                
                const link = document.createElement('a');
                link.download = 'barcode-' + barcodeType.value + '.png';
                link.href = barcodeCanvas.toDataURL('image/png');
                link.click();
            });
            
            // Download as SVG (for 2D codes)
            downloadSVG.addEventListener('click', function() {
                if (barcodeCanvas.classList.contains('hidden')) {
                    showError('No barcode generated yet');
                    return;
                }
                
                const type = barcodeType.value;
                if (!["qrcode", "datamatrix", "pdf417", "azteccode"].includes(type)) {
                    showError('SVG download only available for 2D barcodes');
                    return;
                }
                
                // For SVG, we need to regenerate with vector output
                const svgCanvas = document.createElement('canvas');
                svgCanvas.width = 300;
                svgCanvas.height = 300;
                
                try {
                    bwipjs.toCanvas(svgCanvas, {
                        bcid: barcodeTypeMap[type],
                        text: barcodeInput.value.trim(),
                        scale: 1, // Vector scale
                        height: 0, // Auto height
                        includetext: false,
                        backgroundcolor: 'FFFFFF', // White background
                        barcolor: '000000' // Black bars
                    }, function(err) {
                        if (err) {
                            showError('Error generating SVG: ' + err.message);
                            return;
                        }
                        
                        // Convert canvas to SVG
                        const svg = canvasToSVG(svgCanvas);
                        const blob = new Blob([svg], {type: 'image/svg+xml'});
                        const url = URL.createObjectURL(blob);
                        
                        const link = document.createElement('a');
                        link.download = 'barcode-' + type + '.svg';
                        link.href = url;
                        link.click();
                        
                        // Clean up
                        URL.revokeObjectURL(url);
                    });
                } catch (e) {
                    showError('Error generating SVG: ' + e.message);
                }
            });
            
            function canvasToSVG(canvas) {
                // Simple canvas to SVG conversion
                return `<svg xmlns="http://www.w3.org/2000/svg" width="${canvas.width}" height="${canvas.height}">
                    <foreignObject width="100%" height="100%">
                        <div xmlns="http://www.w3.org/1999/xhtml">
                            <img src="${canvas.toDataURL('image/png')}" width="${canvas.width}" height="${canvas.height}"/>
                        </div>
                    </foreignObject>
                </svg>`;
            }
            
            // Copy to clipboard
            copyBarcode.addEventListener('click', function() {
                if (barcodeCanvas.classList.contains('hidden')) {
                    showError('No barcode generated yet');
                    return;
                }
                
                barcodeCanvas.toBlob(function(blob) {
                    navigator.clipboard.write([
                        new ClipboardItem({
                            'image/png': blob
                        })
                    ]).then(function() {
                        // Show success message
                        const originalText = copyBarcode.innerHTML;
                        copyBarcode.innerHTML = '<i class="fas fa-check mr-2"></i> Copied!';
                        copyBarcode.classList.remove('bg-green-600');
                        copyBarcode.classList.add('bg-green-700');
                        
                        setTimeout(function() {
                            copyBarcode.innerHTML = originalText;
                            copyBarcode.classList.remove('bg-green-700');
                            copyBarcode.classList.add('bg-green-600');
                        }, 2000);
                    }).catch(function(err) {
                        showError('Failed to copy: ' + err);
                    });
                });
            });
            
            // Color pickers - update barcode when colors change
            barcodeColor.addEventListener('change', function() {
                if (!barcodeCanvas.classList.contains('hidden')) {
                    generateBarcode();
                }
            });
            
            barcodeBgColor.addEventListener('change', function() {
                if (!barcodeCanvas.classList.contains('hidden')) {
                    generateBarcode();
                }
            });
        });
    </script>
</body>
</html>